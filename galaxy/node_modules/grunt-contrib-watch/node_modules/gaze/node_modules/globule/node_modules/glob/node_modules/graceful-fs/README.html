<!DOCTYPE html><html><head><link rel="stylesheet" href="galaxy/galaxy.css"><link rel="stylesheet" href="//cloud.typography.com/6579472/723444/css/fonts.css"><script src="jquery.js"></script><script src="docs.js"></script><script src="https://galaxyui.com/js/prism.js"></script></head><body ondragstart="return false"><header><ul><li><a href="//www.bnotions.com"><img src="media/logo.svg" width="130"></a></li><li><a href="http://www.bnotions.com/insights/">Stories</a></li><li><a href="https://medium.com/bnotions">Screen Theory</a></li></ul></header><h1>graceful-fs</h1>
<p>graceful-fs functions as a drop-in replacement for the fs module,
making various improvements.</p>
<p>The improvements are meant to normalize behavior across different
platforms and environments, and to make filesystem access more
resilient to errors.</p>
<h2>Improvements over fs module</h2>
<p>graceful-fs:</p>
<ul>
<li>keeps track of how many file descriptors are open, and by default
limits this to 1024. Any further requests to open a file are put in a
queue until new slots become available. If 1024 turns out to be too
much, it decreases the limit further.</li>
<li>fixes <code>lchmod</code> for Node versions prior to 0.6.2.</li>
<li>implements <code>fs.lutimes</code> if possible. Otherwise it becomes a noop.</li>
<li>ignores <code>EINVAL</code> and <code>EPERM</code> errors in <code>chown</code>, <code>fchown</code> or
<code>lchown</code> if the user isn&#39;t root.</li>
<li>makes <code>lchmod</code> and <code>lchown</code> become noops, if not available.</li>
<li>retries reading a file if <code>read</code> results in EAGAIN error.</li>
</ul>
<p>On Windows, it retries renaming a file for up to one second if <code>EACCESS</code>
or <code>EPERM</code> error occurs, likely because antivirus software has locked
the directory.</p>
<h2>Configuration</h2>
<p>The maximum number of open file descriptors that graceful-fs manages may
be adjusted by setting <code>fs.MAX_OPEN</code> to a different number. The default
is 1024.</p>
<footer g="md-margin-t"><ul g="md-container lg-padding-tb centered"><li><a href="https://twitter.com/BNOTIONS" class="twitter-follow-button" data-show-count="false">Follow @BNOTIONS</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></li></ul></footer></body></html>